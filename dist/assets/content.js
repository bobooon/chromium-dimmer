(function(){let e;function n(){return e=document.createElement("dimmer-overlay"),e.style.backgroundColor="#000",e.style.inset="0",e.style.mixBlendMode="multiply",e.style.opacity="0",e.style.pointerEvents="none",e.style.position="fixed",e.style.transitionDuration="0.15s",e.style.transitionProperty="visibility, opacity",e.style.transitionTimingFunction="ease",e.style.visibility="hidden",e.style.zIndex="2147483647",document.documentElement.appendChild(e),e}async function l(){let t;try{t=JSON.parse(localStorage.getItem("dimmer-overlay")||"")}catch{t=await chrome.runtime.sendMessage({type:"getSettings"})}o(t)}function o(t){(!e||!document.documentElement.contains(e))&&(e=n());const i=t[t.url.mode];e.style.backgroundColor=i.overlay.color,e.style.mixBlendMode=i.overlay.blend,e.style.opacity=t.url.on?String(i.overlay.opacity):"0",e.style.visibility=t.url.on?"visible":"hidden"}e=n(),l(),chrome.runtime.onMessage.addListener(t=>{if(t.action==="update"){try{localStorage.setItem("dimmer-overlay",JSON.stringify(t.payload.settings))}catch{}o(t.payload.settings)}})})();
